<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Privacy Mode Demo (IMEI-like, SMS Alert, Lock)</title>
<style>
  :root{
    --bg:#0f1222; --card:#151936; --muted:#8892a6; --text:#e7ecff; --accent:#6ea8ff; --accent2:#7ef2c8; --danger:#ff6b6b;
    --ok:#6bf7a3; --warn:#ffcc66;
  }
  *{box-sizing:border-box}
  body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; background:radial-gradient(1200px 800px at 10% -10%, #1a2049 0%, #0f1222 55%), var(--bg); color:var(--text);}
  .wrap{max-width:900px; margin:40px auto; padding:20px}
  .grid{display:grid; gap:16px}
  .card{background:linear-gradient(180deg,#171b3b, #121634); border:1px solid rgba(255,255,255,.06); border-radius:20px; padding:18px; box-shadow:0 10px 30px rgba(0,0,0,.25)}
  h1{font-size:26px; margin:0 0 8px}
  h2{font-size:18px; margin:0 0 8px; color:#cfd6ff}
  p{color:var(--muted); margin:6px 0 0}
  .row{display:flex; flex-wrap:wrap; gap:10px; align-items:center}
  .btn{
    appearance:none; border:none; border-radius:14px; padding:12px 16px; font-weight:600; cursor:pointer;
    background:linear-gradient(135deg, var(--accent), #9bbcff); color:#0c1027; box-shadow:0 6px 18px rgba(110,168,255,.35);
    transition:transform .06s ease, filter .2s ease
  }
  .btn:active{transform:translateY(1px)}
  .btn.secondary{background:linear-gradient(135deg,#2a2f63,#1b204e); color:#e9efff; box-shadow:none; border:1px solid rgba(255,255,255,.08)}
  .btn.danger{background:linear-gradient(135deg, var(--danger), #ff9b9b); color:#2b0a0a; box-shadow:0 6px 18px rgba(255,107,107,.35)}
  .btn.ok{background:linear-gradient(135deg, var(--ok), #b1ffd1); color:#063019}
  input, textarea{
    width:100%; background:#0f1433; color:#eaf0ff; border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:12px 14px;
    outline:none; transition:border .2s ease, box-shadow .2s ease; font-size:15px
  }
  input:focus, textarea:focus{border-color:#6ea8ff; box-shadow:0 0 0 4px rgba(110,168,255,.15)}
  .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; font-size:13px; background:#0f1433; padding:4px 8px; border-radius:8px; border:1px solid rgba(255,255,255,.08); color:#cfe0ff}
  .pill{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.08); background:#12163a; color:#cfe0ff; font-size:12px}
  .muted{color:var(--muted)}
  .badge{font-size:12px; padding:4px 8px; border-radius:999px; background:#1b204e; border:1px solid rgba(255,255,255,.08); color:#cfe0ff}
  .vault{
    position:relative; min-height:140px; border-radius:16px; border:1px dashed rgba(255,255,255,.12);
    padding:14px; background:linear-gradient(180deg,#14183a,#101438)
  }
  .blurred{filter:blur(8px); pointer-events:none; user-select:none}
  .overlay{
    position:absolute; inset:0; display:flex; align-items:center; justify-content:center; text-align:center;
    background:linear-gradient(180deg,rgba(15,18,34,.35),rgba(15,18,34,.75)); border-radius:16px
  }
  .row.cols{display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:16px}
  .foot{margin-top:16px; font-size:12px; color:#a8b2d8}
  .smslink{word-break:break-all}
  .mono{font-family:ui-monospace,Monaco,Consolas,monospace}
</style>
</head>
<body>
  <div class="wrap grid">

    <div class="card">
      <h1>üì± Privacy Mode Demo</h1>
      <p>This HTML app simulates: stored device ID (IMEI-like), hack detection ‚Üí SMS alert, and a privacy lock that hides your data until you enter your password.</p>
      <p class="muted" style="margin-top:8px">Note: Browsers can‚Äôt access real IMEI or auto-send SMS. This uses a locally saved UUID and a prefilled <span class="kbd">sms:</span> message link.</p>
    </div>

    <div class="card">
      <h2>Device</h2>
      <div class="row cols">
        <div class="grid">
          <div class="pill">Device ID (stored): <span id="deviceId" class="mono" style="margin-left:6px"></span></div>
          <div class="pill">User Agent: <span class="mono" id="ua" style="margin-left:6px"></span></div>
          <div class="row" style="gap:8px">
            <button class="btn secondary" id="regenIdBtn" title="Generate a new device ID">‚Üª Regenerate ID</button>
            <button class="btn secondary" id="copyIdBtn">Copy ID</button>
          </div>
        </div>

        <div class="grid">
          <label for="ownerPhone">Owner phone for alerts (with country code)</label>
          <input id="ownerPhone" placeholder="+91XXXXXXXXXX" autocomplete="tel" inputmode="tel" />
          <label for="ownerEmail">Optional backup email (for server alert)</label>
          <input id="ownerEmail" placeholder="you@example.com" type="email" />
          <div class="row">
            <button class="btn" id="saveContactBtn">Save Contact</button>
            <span id="saveContactStatus" class="badge">not saved</span>
          </div>
        </div>

        <div class="grid">
          <label for="setPassword">Set/Change Privacy Password</label>
          <input id="setPassword" type="password" placeholder="Choose a strong password" />
          <label for="setPassword2">Re-enter Password</label>
          <input id="setPassword2" type="password" placeholder="Re-enter password" />
          <div class="row">
            <button class="btn ok" id="savePasswordBtn">Save Password</button>
            <span id="passStatus" class="badge">no password</span>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>Secured Vault <span id="lockBadge" class="badge">Unlocked</span></h2>
      <div class="vault">
        <div id="vaultContent">
          <h3>My Sensitive Stuff</h3>
          <ul>
            <li>Bank note: **** 1234 (demo)</li>
            <li>OTP seed hint: stored in authenticator (demo)</li>
            <li>Private note: ‚ÄúProject launch on 15th‚Äù (demo)</li>
          </ul>
          <label for="newNote" style="margin-top:12px; display:block">Add a private note (stored locally)</label>
          <textarea id="newNote" rows="3" placeholder="Type a note‚Ä¶"></textarea>
          <div class="row" style="margin-top:8px">
            <button class="btn" id="addNoteBtn">Add Note</button>
            <button class="btn secondary" id="clearNotesBtn">Clear Notes</button>
          </div>
          <div id="notesList" class="grid" style="margin-top:10px"></div>
        </div>

        <div id="lockOverlay" class="overlay" style="display:none">
          <div class="grid" style="gap:10px; max-width:360px">
            <div class="pill">üîí Privacy Mode is ON ‚Äî secured data hidden</div>
            <input id="unlockPassword" type="password" placeholder="Enter privacy password to unlock" />
            <div class="row">
              <button id="unlockBtn" class="btn ok">Unlock</button>
              <button id="forgotBtn" class="btn secondary" title="Resets password & relocks vault">Forgot?</button>
            </div>
            <div id="unlockMsg" class="muted"></div>
          </div>
        </div>
      </div>
      <div class="foot">Everything here is stored in your browser‚Äôs <span class="kbd">localStorage</span> only.</div>
    </div>

    <div class="card">
      <h2>Threat Simulator & Alerts</h2>
      <p class="muted">Tap ‚ÄúSimulate Hack Attempt‚Äù to trigger the alert flow and auto-enter Privacy Mode.</p>
      <div class="row" style="margin-top:8px">
        <button class="btn danger" id="simulateHackBtn">‚ö† Simulate Hack Attempt</button>
        <button class="btn secondary" id="lockNowBtn">Lock Now</button>
        <button class="btn secondary" id="unlockQuickBtn" title="(if you already know the password)">Quick Unlock</button>
      </div>

      <div id="smsSection" class="grid" style="margin-top:14px; display:none">
        <h3>SMS Alert Link</h3>
        <p class="muted">Open this on your phone to send the prefilled SMS alert:</p>
        <a id="smsLink" class="smslink kbd" href="#">sms:</a>
      </div>

      <details style="margin-top:10px">
        <summary class="pill">Optional: server alert (example fetch request)</summary>
        <pre class="kbd" style="white-space:pre-wrap; line-height:1.4; padding:10px">
/* Example you could enable if you add a backend:
fetch("https://your-server.example/alert", {
  method: "POST",
  headers: {"Content-Type":"application/json"},
  body: JSON.stringify({
    deviceId: localStorage.getItem("deviceId"),
    when: new Date().toISOString(),
    userAgent: navigator.userAgent,
    ownerPhone: localStorage.getItem("ownerPhone"),
    ownerEmail: localStorage.getItem("ownerEmail")
  })
});
*/
        </pre>
      </details>
    </div>

    <div class="card">
      <h2>How this maps to your idea</h2>
      <ul>
        <li><b>IMEI stored</b> ‚Üí <span class="kbd">deviceId</span> (UUID) saved in localStorage (browsers can‚Äôt read IMEI).</li>
        <li><b>Hack attempt detected</b> ‚Üí here, a simulated trigger button (you could wire this to heuristics, e.g., abnormal tab visibility changes, devtools detection, etc.).</li>
        <li><b>Send message</b> ‚Üí prefilled <span class="kbd">sms:</span> link for one-tap send (server option shown in comments).</li>
        <li><b>Privacy Mode</b> ‚Üí vault content is blurred/hidden; needs password to reveal.</li>
      </ul>
    </div>

    <div class="foot">Tip: Add this page to your phone‚Äôs home screen for a native-like feel.</div>
  </div>

<script>
/* ------- tiny helpers ------- */
const $ = s => document.querySelector(s);
const save = (k,v) => localStorage.setItem(k, v);
const load = (k, d=null) => localStorage.getItem(k) ?? d;
const genUUID = () => crypto.randomUUID ? crypto.randomUUID() :
  'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c=>{
    const r = crypto.getRandomValues(new Uint8Array(1))[0] & 15;
    const v = c === 'x' ? r : (r & 0x3 | 0x8); return v.toString(16);
  });

/* ------- password hashing (Web Crypto, SHA-256) ------- */
async function sha256(text){
  const enc = new TextEncoder().encode(text);
  const buf = await crypto.subtle.digest('SHA-256', enc);
  return [...new Uint8Array(buf)].map(b => b.toString(16).padStart(2,'0')).join('');
}

function uiToast(el, txt, ms=1200){ el.textContent = txt; el.style.opacity=1; setTimeout(()=>el.style.opacity=.8, ms); }

/* ------- device setup ------- */
function ensureDeviceId(){
  let id = load("deviceId");
  if(!id){ id = genUUID(); save("deviceId", id); }
  $("#deviceId").textContent = id;
  $("#ua").textContent = navigator.userAgent;
}
function regenerateId(){
  const id = genUUID(); save("deviceId", id);
  $("#deviceId").textContent = id;
}

/* ------- contact ------- */
function loadContact(){
  $("#ownerPhone").value = load("ownerPhone","") || "";
  $("#ownerEmail").value = load("ownerEmail","") || "";
  $("#saveContactStatus").textContent = ($("#ownerPhone").value || $("#ownerEmail").value) ? "saved" : "not saved";
}
function saveContact(){
  save("ownerPhone", $("#ownerPhone").value.trim());
  save("ownerEmail", $("#ownerEmail").value.trim());
  $("#saveContactStatus").textContent = ($("#ownerPhone").value || $("#ownerEmail").value) ? "saved" : "not saved";
}

/* ------- password ------- */
async function loadPassStatus(){
  const has = !!load("passHash");
  $("#passStatus").textContent = has ? "password set" : "no password";
}
async function savePassword(){
  const a = $("#setPassword").value, b = $("#setPassword2").value;
  if(!a || a.length < 4){ alert("Use a longer password (4+ chars for demo)."); return; }
  if(a !== b){ alert("Passwords do not match."); return; }
  const hash = await sha256(a);
  save("passHash", hash);
  $("#setPassword").value = $("#setPassword2").value = "";
  await loadPassStatus();
  alert("Password saved.");
}

/* ------- vault (private notes) ------- */
function renderNotes(){
  const notes = JSON.parse(load("notes","[]"));
  const box = $("#notesList");
  box.innerHTML = "";
  notes.forEach((t,i)=>{
    const div = document.createElement("div");
    div.className = "card";
    div.style.padding = "12px";
    div.style.background = "linear-gradient(180deg,#161a3a,#111538)";
    div.innerHTML = `<div class="row" style="justify-content:space-between"><div class="mono" style="white-space:pre-wrap">${t}</div>
      <button class="btn secondary" data-i="${i}">Delete</button></div>`;
    box.appendChild(div);
  });
  box.querySelectorAll("button[data-i]").forEach(btn=>{
    btn.addEventListener("click", e=>{
      const idx = +e.currentTarget.dataset.i;
      const arr = JSON.parse(load("notes","[]"));
      arr.splice(idx,1); save("notes", JSON.stringify(arr)); renderNotes();
    })
  })
}
function addNote(){
  const t = $("#newNote").value.trim();
  if(!t) return;
  const notes = JSON.parse(load("notes","[]"));
  notes.unshift(t); save("notes", JSON.stringify(notes));
  $("#newNote").value = ""; renderNotes();
}
function clearNotes(){
  if(confirm("Clear all notes?")){ save("notes","[]"); renderNotes(); }
}

/* ------- privacy mode (lock/unlock) ------- */
function setLockedState(locked){
  save("locked", locked ? "1" : "0");
  const vc = $("#vaultContent"), ov = $("#lockOverlay"), badge = $("#lockBadge");
  vc.classList.toggle("blurred", locked);
  ov.style.display = locked ? "flex" : "none";
  badge.textContent = locked ? "Locked" : "Unlocked";
}
async function lockNow(){
  setLockedState(true);
}
async function unlockWithPassword(){
  const input = $("#unlockPassword").value;
  if(!input){ $("#unlockMsg").textContent = "Password required."; return; }
  const hash = await sha256(input);
  const saved = load("passHash");
  if(saved && hash === saved){
    setLockedState(false);
    $("#unlockPassword").value = "";
    $("#unlockMsg").textContent = "";
  } else {
    $("#unlockMsg").textContent = "Wrong password.";
  }
}
function forgotPassword(){
  if(!confirm("This will clear the saved password and keep the vault locked. Proceed?")) return;
  localStorage.removeItem("passHash");
  $("#passStatus").textContent = "no password";
  setLockedState(true);
}

/* ------- alert flow (hack simulation) ------- */
function buildSmsLink(){
  const to = (load("ownerPhone","") || "").replace(/\s+/g,'');
  if(!to) return null;
  const deviceId = load("deviceId");
  const ua = navigator.userAgent;
  const ts = new Date().toISOString();
  const body = encodeURIComponent(`ALERT: Suspicious activity detected.\nDeviceID: ${deviceId}\nWhen: ${ts}\nUA: ${ua}`);
  return `sms:${encodeURIComponent(to)}?&body=${body}`;
}
function showSmsLink(){
  const href = buildSmsLink();
  if(href){
    $("#smsLink").setAttribute("href", href);
    $("#smsLink").textContent = href;
    $("#smsSection").style.display = "block";
  } else {
    $("#smsSection").style.display = "none";
  }
}
async function simulateHack(){
  // 1) Enter privacy mode immediately
  await lockNow();

  // 2) Prepare SMS alert link
  showSmsLink();

  // 3) (Optional) Fire-and-forget server alert if you add a backend (see <details> block)
  // See commented-out fetch in HTML.

  // 4) Visual feedback
  alert("Potential attack detected. Privacy Mode ON. Prepare to send SMS alert.");
}

/* ------- quick unlock (if already typed) ------- */
async function quickUnlock(){
  if(load("locked") !== "1"){ alert("Vault is already unlocked."); return; }
  $("#unlockPassword").focus();
}

/* ------- init & events ------- */
function init(){
  ensureDeviceId();
  loadContact();
  loadPassStatus();
  renderNotes();
  setLockedState(load("locked")==="1");

  // events
  $("#regenIdBtn").addEventListener("click", regenerateId);
  $("#copyIdBtn").addEventListener("click", async ()=>{
    await navigator.clipboard.writeText(load("deviceId")); alert("Device ID copied.");
  });

  $("#saveContactBtn").addEventListener("click", saveContact);
  $("#savePasswordBtn").addEventListener("click", savePassword);

  $("#addNoteBtn").addEventListener("click", addNote);
  $("#clearNotesBtn").addEventListener("click", clearNotes);

  $("#unlockBtn").addEventListener("click", unlockWithPassword);
  $("#forgotBtn").addEventListener("click", forgotPassword);

  $("#simulateHackBtn").addEventListener("click", simulateHack);
  $("#lockNowBtn").addEventListener("click", lockNow);
  $("#unlockQuickBtn").addEventListener("click", quickUnlock);

  // keep SMS link fresh
  showSmsLink();
  $("#ownerPhone").addEventListener("input", showSmsLink);
}
document.addEventListener("DOMContentLoaded", init);
</script>
</body>
</html>
